
<div class="car-detail-container" *ngIf="car">
  <div class="top-row">
    <button mat-stroked-button color="primary" routerLink="/cars" class="back-button">
      <mat-icon>arrow_back</mat-icon>
      Back to Cars
    </button>
    <div class="title-actions">
      <div class="car-title-group">
        <h1 class="car-title">{{car.make}} {{car.model}}</h1>
        <span class="car-subtitle">{{car.year}} â€¢ {{car.category | titlecase}}</span>
      </div>
      <div class="actions-right">
        <div class="price">
          <div class="rate">{{car.daily_rate | currency}}</div>
          <div class="per-day">/day</div>
        </div>
        <div class="availability" [ngClass]="car.is_available ? 'available' : 'unavailable'">
          <mat-icon>{{car.is_available ? 'check_circle' : 'cancel'}}</mat-icon>
          <span>{{car.is_available ? 'Available' : 'Not Available'}}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="content-grid">
    <div class="image-panel">
      <mat-card class="image-card">
        <img mat-card-image [src]="car.image_url" [alt]="car.make + ' ' + car.model">
        <mat-card-footer class="image-footer">
          <div class="footer-left">
            <strong>{{car.make}} {{car.model}}</strong>
          </div>
          <div class="footer-right">
            <button mat-icon-button aria-label="favorite">
              <mat-icon>favorite_border</mat-icon>
            </button>
            <button mat-icon-button aria-label="share">
              <mat-icon>share</mat-icon>
            </button>
          </div>
        </mat-card-footer>
      </mat-card>
    </div>

    <div class="details-panel">
      <mat-card class="info-card">
        <mat-card-content>
          <div class="specifications">
            <h3><mat-icon>info</mat-icon> Specifications</h3>
            <div class="spec-grid">
              <div class="spec-item">
                <mat-icon>airline_seat_recline_normal</mat-icon>
                <div class="spec-label">Seats</div>
                <div class="spec-value">{{car.seats}}</div>
              </div>
              <div class="spec-item">
                <mat-icon>settings</mat-icon>
                <div class="spec-label">Transmission</div>
                <div class="spec-value">{{car.transmission | titlecase}}</div>
              </div>
              <div class="spec-item">
                <mat-icon>local_gas_station</mat-icon>
                <div class="spec-label">Fuel</div>
                <div class="spec-value">{{car.fuel_type | titlecase}}</div>
              </div>
              <div class="spec-item">
                <mat-icon>palette</mat-icon>
                <div class="spec-label">Color</div>
                <div class="spec-value">{{car.color}}</div>
              </div>
              <div class="spec-item">
                <mat-icon>location_on</mat-icon>
                <div class="spec-label">Location</div>
                <div class="spec-value">{{car.location}}</div>
              </div>
            </div>
          </div>

          <div class="features" *ngIf="car && car.features && car.features.length > 0">
            <h3><mat-icon>star</mat-icon> Features</h3>
            <div class="features-chips">
              <ng-container *ngFor="let feature of car.features">
                <mat-chip>{{feature}}</mat-chip>
              </ng-container>
            </div>
          </div>
        </mat-card-content>

        <mat-card-actions align="end" class="card-actions-row">
          <div class="price-inline">
            <div class="rate">{{car.daily_rate | currency}}</div>
            <div class="per-day">/day</div>
          </div>
          <button mat-stroked-button color="accent" routerLink="/cars">Back</button>
          <button mat-raised-button color="primary" [disabled]="!car.is_available" (click)="openBookingDialog()">
            <mat-icon>event_available</mat-icon>
            Book This Car
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>

<div *ngIf="!car" class="loading">
  <mat-card>
    <mat-card-content>
      <p>Loading car details...</p>
    </mat-card-content>
  </mat-card>
</div>
